(()=>{let e=null;chrome.action.onClicked.addListener((function(){chrome.windows.getAll({},(async()=>{if(e)chrome.windows.update(e.id,{focused:!0});else{const{height:n,width:d}=await chrome.windows.getCurrent();var o=d/2-500,t=n/2-400;chrome.windows.create({url:"popup.html",type:"popup",width:1e3,height:800,left:o,top:t},(o=>{e=o}))}})),chrome.windows.onRemoved.addListener((o=>{e&&e.id===o&&(e=null)}))})),chrome.windows.onFocusChanged.addListener((function(o){o===e?.id&&chrome.runtime.sendMessage({msg:"popup_focused",data:{subject:"Loading",content:"Just completed!"}})}))})();